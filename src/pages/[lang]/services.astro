---
import { getEntry } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";
import MainLayout from "../../components/layout/MainLayout.astro";
import ContentSection from "../../components/sections/ContentSection.astro";
import { useTranslations, type Language } from "../../i18n";

export async function getStaticPaths() {
  return [{ params: { lang: "en" } }, { params: { lang: "zh" } }];
}

const { lang } = Astro.params as { lang: Language };
const t = useTranslations(lang);

// Get profile data
const profile = await getEntry("profile", lang);

// Get reviewing content
const reviewingEntry = await getEntry("reviewing", lang);
const reviewingItems = reviewingEntry ? [{
  title: reviewingEntry.data.title,
  content: reviewingEntry.body || ""
}] : [];
---

<BaseLayout
  title={`${profile?.data.name} - ${t("nav.services")}`}
  description={`${t("nav.services")} - ${profile?.data.name}`}
  lang={lang}
>
  <MainLayout
    name={profile?.data.name || "Cheng LYU"}
    lang={lang}
    currentPath={`/${lang}/services`}
    photo={profile?.data.photo || "/images/photo.jpg"}
    contacts={profile?.data.contacts || []}
  >
    <ContentSection title={t("sections.reviewing")} items={reviewingItems} />
  </MainLayout>
</BaseLayout>
